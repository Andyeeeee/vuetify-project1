import{Y as g,x as m,aF as d,a2 as o,a3 as c,a4 as n,c as r,a6 as i,aR as _,a8 as u,a9 as h,K as p,af as k,ag as y,a7 as b}from"./index-a146839e.js";const v=n("h1",{style:{color:"black"}},"訂單進度",-1),w={style:{display:"flex","justify-content":"center",width:"80%",height:"500px",margin:"auto","background-color":"#004886"}},C={style:{width:"50%","text-align":"center",border:"3px solid black"}},V=n("h2",{class:"title-box",style:{"background-color":"#fcae11",color:"#000"}}," 目前訂單 ",-1),B={key:0},N={style:{width:"50%",border:"3px solid black"}},S=n("h2",{class:"title-box",style:{"background-color":"#fcae11",color:"#000"}}," 已完成訂單 ",-1),F={key:0},q={__name:"NowOrder",setup(T){const f=g(),e=m([]);(async()=>{try{const{data:a}=await d.get("/orders/all");console.log(e),e.value.push(...a.result.map(l=>(l.total=l.cart.reduce((t,s)=>t+s.product.price*s.quantity,0),l)))}catch(a){f({text:a.response.data.message,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}})();const x=async a=>{try{const{data:l}=await d.patch("/orders/"+a,{status:!0});console.log(e);const t=e.value.findIndex(s=>s._id===a);e.value[t].status=!0}catch{}};return(a,l)=>(o(),c(u,null,[v,n("div",w,[n("div",C,[V,r(_,null,{default:i(()=>[(o(!0),c(u,null,h(e.value,t=>(o(),c("tr",{key:t._id},[t.status?b("",!0):(o(),c("td",B,[r(p,{width:"100%",onClick:s=>x(t._id)},{default:i(()=>[k(y(t.user.account),1)]),_:2},1032,["onClick"])]))]))),128))]),_:1})]),n("div",N,[S,r(_,null,{default:i(()=>[(o(!0),c(u,null,h(e.value,(t,s)=>(o(),c("tr",{key:t._id},[t.status?(o(),c("td",F,[r(p,{width:"100%",onClick:$=>e.value.splice(s,1)},{default:i(()=>[k(y(t.user.account),1)]),_:2},1032,["onClick"])])):b("",!0)]))),128))]),_:1})])])],64))}};export{q as default};
