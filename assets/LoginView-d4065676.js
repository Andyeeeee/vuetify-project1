import{Y as w,Z as x,_ as y,aG as k,a2 as S,a3 as B,c as t,a5 as s,af as o,V as C,aa as a,aJ as F,aK as i,K as d,ac as m}from"./index-e94b06ba.js";import{_ as M}from"./icon-05a315e1.js";import{c as N,a as p,u as U,d as _}from"./index.esm-a7f06292.js";import{b as j,a as q,V as K}from"./VRow-16ca80fc.js";import{V as P}from"./VForm-34e9f49a.js";import"./_commonjsHelpers-39b5b250.js";const R={style:{"background-color":"#004886"}},T=o("h1",{class:"text-center"},"會員登入",-1),$=o("div",null," ",-1),E=o("div",null," ",-1),G=o("hr",null,null,-1),I=o("div",null," ",-1),H={__name:"LoginView",setup(J){const c=w(),f=x(),V=y(),g=N({account:p().required("帳號必填").min(4,"帳號最少 4 個字").max(20,"帳號最多 20 個字"),password:p().required("密碼必填").min(4,"密碼最少 4 個字").max(20,"密碼最多 20 個字")}),{handleSubmit:h,isSubmitting:b}=U({validationSchema:g}),r=_("account"),l=_("password"),v=h(async n=>{try{const{data:e}=await k.post("/users/login",{account:n.account,password:n.password});V.login({token:e.result.token,account:e.result.account,email:e.result.email,cart:e.result.cart,role:e.result.role}),c({text:"登入成功",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"green",location:"bottom"}}),f.push("/")}catch(e){c({text:e.response.data.message,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}});return(n,e)=>(S(),B("section",R,[T,t(j,null,{default:s(()=>[t(C,{width:180,"aspect-ratio":"16/9",cover:"",src:M,style:{margin:"auto"}}),t(q,{cols:"4",style:{margin:"auto"},class:"text-center justify-center"},{default:s(()=>[t(P,{disabled:a(b),onSubmit:F(a(v),["prevent"])},{default:s(()=>[t(i,{modelValue:a(r).value.value,"onUpdate:modelValue":e[0]||(e[0]=u=>a(r).value.value=u),"error-messages":a(r).errorMessage.value,placeholder:"帳號",counter:"",maxlength:"20"},null,8,["modelValue","error-messages"]),t(i,{modelValue:a(l).value.value,"onUpdate:modelValue":e[1]||(e[1]=u=>a(l).value.value=u),"error-messages":a(l).errorMessage.value,placeholder:"密碼",counter:"",maxlength:"20",type:"password"},null,8,["modelValue","error-messages"]),$,t(K,{style:{"justify-content":"space-around"}},{default:s(()=>[t(d,{type:"submit"},{default:s(()=>[m("登入")]),_:1})]),_:1})]),_:1},8,["disabled","onSubmit"]),E,G,I,t(d,{to:"/register"},{default:s(()=>[m("註冊會員")]),_:1})]),_:1})]),_:1})]))}};export{H as default};
